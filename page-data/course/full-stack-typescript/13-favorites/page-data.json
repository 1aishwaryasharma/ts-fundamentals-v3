{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/full-stack-typescript/13-favorites/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"fundamentals-v3","title":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","title":"Intermediate TypeScript","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","title":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"full-stack-typescript","title":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"}]}},"markdownRemark":{"id":"9ca8cbc2-4785-573e-bfc0-0f72d63641e0","excerpt":"Schema Update your graphql.schema by adding the following and add add two new mutations In client/src/Tweet.tsx add these imports and add two new mutations Runâ€¦","html":"<h2 id=\"schema\" style=\"position:relative;\"><a href=\"#schema\" aria-label=\"schema permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Schema</h2>\n<p>Update your <code>graphql.schema</code> by adding the following</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">graphql</div><div class='code-container'><code><div class='line'><span style=\"color: #D73A49\">input</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">FavoriteInput</span><span style=\"color: #24292E\"> {</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #E36209\">userId</span><span style=\"color: #24292E\">: </span><span style=\"color: #005CC5\">String</span><span style=\"color: #D73A49\">!</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #E36209\">tweetId</span><span style=\"color: #24292E\">: </span><span style=\"color: #005CC5\">String</span><span style=\"color: #D73A49\">!</span></div><div class='line'><span style=\"color: #24292E\">}</span></div></code></div></pre>\n<p>and add add two new mutations</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #24292E\">type Mutation {</span></div><div class='line'><span style=\"color: #24292E\">  createTweet(userId: String!, body: String!): Tweet!</span></div><div class='line'><span style=\"color: #22863A\">+ createFavorite(favorite: FavoriteInput!): Favorite!</span></div><div class='line'><span style=\"color: #22863A\">+ deleteFavorite(favorite: FavoriteInput!): Favorite!</span></div><div class='line'><span style=\"color: #24292E\">}</span></div></code></div></pre>\n<p>In <code>client/src/Tweet.tsx</code> add these imports</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #D73A49\">import</span><span style=\"color: #24292E\"> { gql } </span><span style=\"color: #D73A49\">from</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">\"@apollo/client\"</span></div><div class='line'><span style=\"color: #D73A49\">import</span><span style=\"color: #24292E\"> {</span></div><div class='line'><span style=\"color: #24292E\">  useCreateFavoriteMutation,</span></div><div class='line'><span style=\"color: #24292E\">  useDeleteFavoriteMutation,</span></div><div class='line'><span style=\"color: #24292E\">} </span><span style=\"color: #D73A49\">from</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">\"./generated/graphql\"</span></div><div class='line'><span style=\"color: #D73A49\">import</span><span style=\"color: #24292E\"> { GET_TIMELINE_TWEETS } </span><span style=\"color: #D73A49\">from</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">\"./Timeline\"</span></div><div class='line'><span style=\"color: #D73A49\">import</span><span style=\"color: #24292E\"> { GET_CURRENT_USER } </span><span style=\"color: #D73A49\">from</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">\"./App\"</span></div></code></div></pre>\n<p>and add two new mutations</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #D73A49\">export</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">const</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">CREATE_FAVORITE</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">gql</span><span style=\"color: #032F62\">`</span></div><div class='line'><span style=\"color: #032F62\">  mutation CreateFavorite($favorite: FavoriteInput!) {</span></div><div class='line'><span style=\"color: #032F62\">    createFavorite(favorite: $favorite) {</span></div><div class='line'><span style=\"color: #032F62\">      id</span></div><div class='line'><span style=\"color: #032F62\">    }</span></div><div class='line'><span style=\"color: #032F62\">  }</span></div><div class='line'><span style=\"color: #032F62\">`</span></div><div class='line'><span style=\"color: #D73A49\">export</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">const</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">DELETE_FAVORITE</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">gql</span><span style=\"color: #032F62\">`</span></div><div class='line'><span style=\"color: #032F62\">  mutation DeleteFavorite($favorite: FavoriteInput!) {</span></div><div class='line'><span style=\"color: #032F62\">    deleteFavorite(favorite: $favorite) {</span></div><div class='line'><span style=\"color: #032F62\">      id</span></div><div class='line'><span style=\"color: #032F62\">    }</span></div><div class='line'><span style=\"color: #032F62\">  }</span></div><div class='line'><span style=\"color: #032F62\">`</span></div></code></div></pre>\n<p>Run <code>yarn codegen</code> in both the <code>client</code> and <code>server</code> sub-projects to get\nupdated TS types that include this change to the schema and queries</p>\n<h2 id=\"backend\" style=\"position:relative;\"><a href=\"#backend\" aria-label=\"backend permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Backend</h2>\n<p>In <code>server/src/resolvers/Mutation.ts</code> add an import</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #D73A49\">import</span><span style=\"color: #24292E\"> { favoriteTransform } </span><span style=\"color: #D73A49\">from</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">\"../transforms\"</span></div></code></div></pre>\n<p>and add two new resolvers for the new mutations</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #24292E\">  async </span><span style=\"color: #6F42C1\">createFavorite</span><span style=\"color: #24292E\">(_parent, args, { db }) {</span></div><div class='line'><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">const</span><span style=\"color: #24292E\"> { </span><span style=\"color: #005CC5\">favorite</span><span style=\"color: #24292E\"> } </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> args;</span></div><div class='line'><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">const</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">fav</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">await</span><span style=\"color: #24292E\"> db.</span><span style=\"color: #6F42C1\">createFavorite</span><span style=\"color: #24292E\">(favorite);</span></div><div class='line'><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> {</span></div><div class='line'><span style=\"color: #24292E\">      </span><span style=\"color: #D73A49\">...</span><span style=\"color: #6F42C1\">favoriteTransform</span><span style=\"color: #24292E\">(fav),</span></div><div class='line'><span style=\"color: #24292E\">      user: db.</span><span style=\"color: #6F42C1\">getUserById</span><span style=\"color: #24292E\">(fav.userId),</span></div><div class='line'><span style=\"color: #24292E\">      tweet: </span><span style=\"color: #6F42C1\">tweetTransform</span><span style=\"color: #24292E\">(db.</span><span style=\"color: #6F42C1\">getTweetById</span><span style=\"color: #24292E\">(fav.tweetId)),</span></div><div class='line'><span style=\"color: #24292E\">    };</span></div><div class='line'><span style=\"color: #24292E\">  },</span></div><div class='line'><span style=\"color: #24292E\">  async </span><span style=\"color: #6F42C1\">deleteFavorite</span><span style=\"color: #24292E\">(_parent, args, { db }) {</span></div><div class='line'><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">const</span><span style=\"color: #24292E\"> { </span><span style=\"color: #005CC5\">favorite</span><span style=\"color: #24292E\"> } </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> args;</span></div><div class='line'><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">const</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">fav</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">await</span><span style=\"color: #24292E\"> db.</span><span style=\"color: #6F42C1\">deleteFavorite</span><span style=\"color: #24292E\">(favorite);</span></div><div class='line'><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> {</span></div><div class='line'><span style=\"color: #24292E\">      </span><span style=\"color: #D73A49\">...</span><span style=\"color: #6F42C1\">favoriteTransform</span><span style=\"color: #24292E\">(fav),</span></div><div class='line'><span style=\"color: #24292E\">      user: db.</span><span style=\"color: #6F42C1\">getUserById</span><span style=\"color: #24292E\">(fav.userId),</span></div><div class='line'><span style=\"color: #24292E\">      tweet: </span><span style=\"color: #6F42C1\">tweetTransform</span><span style=\"color: #24292E\">(db.</span><span style=\"color: #6F42C1\">getTweetById</span><span style=\"color: #24292E\">(fav.tweetId)),</span></div><div class='line'><span style=\"color: #24292E\">    };</span></div><div class='line'><span style=\"color: #24292E\">  },</span></div></code></div></pre>\n<h2 id=\"frontend\" style=\"position:relative;\"><a href=\"#frontend\" aria-label=\"frontend permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Frontend</h2>\n<p>In <code>client/src/Tweet.tsx</code>, inside the component</p>\n<p>Make a small adjustment to the destructured assignment of the tweet object</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #B31D28\">-  id: _id,</span></div><div class='line'><span style=\"color: #22863A\">+  id,</span></div></code></div></pre>\n<p>add hooks for the two new mutations</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #D73A49\">const</span><span style=\"color: #24292E\"> [</span><span style=\"color: #005CC5\">createFavorite</span><span style=\"color: #24292E\">, { </span><span style=\"color: #E36209\">error</span><span style=\"color: #24292E\">: </span><span style=\"color: #005CC5\">createFavoriteError</span><span style=\"color: #24292E\"> }] </span><span style=\"color: #D73A49\">=</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #6F42C1\">useCreateFavoriteMutation</span><span style=\"color: #24292E\">({</span></div><div class='line'><span style=\"color: #24292E\">    variables: {</span></div><div class='line'><span style=\"color: #24292E\">      favorite: { tweetId: id, userId: currentUserId },</span></div><div class='line'><span style=\"color: #24292E\">    },</span></div><div class='line'><span style=\"color: #24292E\">    refetchQueries: [</span><span style=\"color: #005CC5\">GET_TIMELINE_TWEETS</span><span style=\"color: #24292E\">, </span><span style=\"color: #005CC5\">GET_CURRENT_USER</span><span style=\"color: #24292E\">],</span></div><div class='line'><span style=\"color: #24292E\">  })</span></div><div class='line'><span style=\"color: #D73A49\">const</span><span style=\"color: #24292E\"> [</span><span style=\"color: #005CC5\">deleteFavorite</span><span style=\"color: #24292E\">, { </span><span style=\"color: #E36209\">error</span><span style=\"color: #24292E\">: </span><span style=\"color: #005CC5\">deleteFavoriteError</span><span style=\"color: #24292E\"> }] </span><span style=\"color: #D73A49\">=</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #6F42C1\">useDeleteFavoriteMutation</span><span style=\"color: #24292E\">({</span></div><div class='line'><span style=\"color: #24292E\">    variables: {</span></div><div class='line'><span style=\"color: #24292E\">      favorite: { tweetId: id, userId: currentUserId },</span></div><div class='line'><span style=\"color: #24292E\">    },</span></div><div class='line'><span style=\"color: #24292E\">    refetchQueries: [</span><span style=\"color: #005CC5\">GET_TIMELINE_TWEETS</span><span style=\"color: #24292E\">, </span><span style=\"color: #005CC5\">GET_CURRENT_USER</span><span style=\"color: #24292E\">],</span></div><div class='line'><span style=\"color: #24292E\">  })</span></div><div class='line'></div><div class='line'><span style=\"color: #D73A49\">if</span><span style=\"color: #24292E\"> (createFavoriteError) {</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> (</span></div><div class='line'><span style=\"color: #24292E\">    &lt;</span><span style=\"color: #E36209\">p</span><span style=\"color: #24292E\">&gt;</span></div><div class='line'><span style=\"color: #24292E\">      </span><span style=\"color: #005CC5\">Error</span><span style=\"color: #24292E\"> creating </span><span style=\"color: #E36209\">favorite</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {</span><span style=\"color: #E36209\">createFavoriteError</span><span style=\"color: #24292E\">.</span><span style=\"color: #E36209\">message</span><span style=\"color: #24292E\">}</span></div><div class='line'><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">&lt;/</span><span style=\"color: #24292E\">p</span><span style=\"color: #D73A49\">&gt;</span></div><div class='line'><span style=\"color: #24292E\">  )</span></div><div class='line'><span style=\"color: #24292E\">}</span></div><div class='line'><span style=\"color: #D73A49\">if</span><span style=\"color: #24292E\"> (deleteFavoriteError) {</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> (</span></div><div class='line'><span style=\"color: #24292E\">    &lt;</span><span style=\"color: #E36209\">p</span><span style=\"color: #24292E\">&gt;</span></div><div class='line'><span style=\"color: #24292E\">      </span><span style=\"color: #005CC5\">Error</span><span style=\"color: #24292E\"> deleting </span><span style=\"color: #E36209\">favorite</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {</span><span style=\"color: #E36209\">deleteFavoriteError</span><span style=\"color: #24292E\">.</span><span style=\"color: #E36209\">message</span><span style=\"color: #24292E\">}</span></div><div class='line'><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">&lt;/</span><span style=\"color: #24292E\">p</span><span style=\"color: #D73A49\">&gt;</span></div><div class='line'><span style=\"color: #24292E\">  )</span></div><div class='line'><span style=\"color: #24292E\">}</span></div></code></div></pre>\n<p>replace the contents of <code>handleFavoriteClick</code> with</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #D73A49\">if</span><span style=\"color: #24292E\"> (isFavorited)</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #6F42C1\">deleteFavorite</span><span style=\"color: #24292E\">().</span><span style=\"color: #6F42C1\">catch</span><span style=\"color: #24292E\">((</span><span style=\"color: #E36209\">err</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">=&gt;</span></div><div class='line'><span style=\"color: #24292E\">    console.</span><span style=\"color: #6F42C1\">error</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">\"error while deleting favorite\"</span><span style=\"color: #24292E\">, err)</span></div><div class='line'><span style=\"color: #24292E\">  )</span></div><div class='line'><span style=\"color: #D73A49\">else</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #6F42C1\">createFavorite</span><span style=\"color: #24292E\">().</span><span style=\"color: #6F42C1\">catch</span><span style=\"color: #24292E\">((</span><span style=\"color: #E36209\">err</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">=&gt;</span></div><div class='line'><span style=\"color: #24292E\">    console.</span><span style=\"color: #6F42C1\">error</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">\"error while creating favorite\"</span><span style=\"color: #24292E\">, err)</span></div><div class='line'><span style=\"color: #24292E\">  )</span></div></code></div></pre>\n<p>Now try liking and un-liking tweets. You should see the like count and icon change!</p>","tableOfContents":"<ul>\n<li><a href=\"#schema\">Schema</a></li>\n<li><a href=\"#backend\">Backend</a></li>\n<li><a href=\"#frontend\">Frontend</a></li>\n</ul>","fields":{"slug":"/course/full-stack-typescript/13-favorites/"},"frontmatter":{"title":"Favorites Interactivity","course":"full-stack-typescript","date":"March 24, 2022","description":"Let's make our \"like\" button clickable, by creating and deleting a \"favorite\" resource\n"}}},"pageContext":{"slug":"/course/full-stack-typescript/13-favorites/","title":"Favorites Interactivity","course":"full-stack-typescript","order":13,"previous":{"fields":{"slug":"/course/full-stack-typescript/12-favorites/"},"frontmatter":{"title":"Favorites","order":12,"course":"full-stack-typescript","isExercise":null}},"next":{"fields":{"slug":"/course/full-stack-typescript/14-trends/"},"frontmatter":{"title":"Trends","order":14,"course":"full-stack-typescript","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}